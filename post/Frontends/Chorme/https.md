# HTTPS

> 使用 HTTP 传输的内容很容易被中间人窃取、伪造和篡改，通常我们把这种攻击方式称为中间人攻击

## 在 HTTP 协议栈中引入安全层

> 明文传输使得传输过程毫无安全性可言，且制约了网上购物、在线转账等一系列场景应用，于是倒逼着我们要引入加密方案。

## HTTPS VS HTTP

> 通常 HTTP 直接和 TCP 通信，HTTPS 则先和安全层通信，然后安全层再和 TCP 层通信

### 安全层

> 对发起 HTTP 请求的数据进行加密操作和对接收到 HTTP 的内容进行解密操作

## 使用对称加密

> 对称加密是指加密和解密都使用的是相同的密钥。

### 加密的密钥更加难以破解，我们让服务器和客户端同时决定密钥，具体过程如下

1. 浏览器发送它所支持的加密套件列表和一个随机数 client-random，这里的加密套件是指加密的方法，加密套件列表就是指浏览器能支持多少种加密方法列表。
2. 服务器会从加密套件列表中选取一个加密套件，然后还会生成一个随机数 service-random，并将 service-random 和加密套件列表返回给浏览器。
3. 浏览器和服务器分别返回确认消息。

## 使用非对称加密

> 非对称加密算法有 A、B 两把密钥，如果你用 A 密钥来加密，那么只能使用 B 密钥来解密；反过来，如果你要 B 密钥来加密，那么只能用 A 密钥来解密。

## 对称加密和非对称加密搭配使用

> 在传输数据阶段依然使用对称加密，但是对称加密的密钥我们采用非对称加密来传输。

## 添加数字证书

> 需要使用权威机构颁发的证书，这个权威机构称为 CA（Certificate Authority），颁发的证书就称为数字证书（Digital Certificate)

### CA 证书的特点

> 申请数字证书是不需要提供私钥的，要确保私钥永远只能由服务器掌握；数字证书最核心的是 CA 使用它的私钥生成的数字签名；内置 CA 对应的证书称为根证书，根证书是最权威的机构，它们自己为自己签名，我们把这称为自签名证书。
